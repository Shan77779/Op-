local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/jensonhirst/Orion/main/source"))()

local Window = OrionLib:MakeWindow({
    Name = "SHAN SCRIPTS - OP Edition 🌟",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "ShanScriptsConfig",
    BackgroundColor3 = Color3.fromRGB(36, 36, 36),
})

OrionLib:MakeNotification({
    Name = "WELCOME TO SHAN SCRIPTS 🚀",
    Content = "This GUI is created by SHAN GWAPO for maximum fun and OP features! 💥",
    Image = "rbxassetid://4483345998",
    Time = 5
})

-- Combat Tab
local combatTab = Window:MakeTab({
    Name = "Combat 🎯",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Aimbot Toggle
combatTab:AddToggle({
    Name = "🎯 Enable Aimbot",
    Default = false,
    Callback = function(state)
        _G.AimbotEnabled = state
    end
})

combatTab:AddToggle({
    Name = "🤫 Silent Aim",
    Default = false,
    Callback = function(state)
        _G.SilentAim = state
    end
})

-- Function to find the closest enemy within range (set to 60 studs)
local function getClosestEnemyInPlace()
    local closestPlayer = nil
    local shortestDistance = math.huge  -- Set to a large number initially
    local localPlayer = game.Players.LocalPlayer
    local camera = workspace.CurrentCamera

    -- Iterate through all players in the game
    for _, player in pairs(game.Players:GetPlayers()) do
        -- Skip the local player and dead players
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("Head") then
            -- If the player is alive and is not the local player, check if they are an enemy
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid and humanoid.Health > 0 then
                -- Check if the player is not a teammate
                if player.Team ~= localPlayer.Team then
                    -- Calculate the distance from the local player's head
                    local distance = (camera.CFrame.Position - player.Character.Head.Position).Magnitude
                    -- Only consider enemies within a range of 60 studs
                    if distance <= 60 then
                        -- Target the closest enemy
                        if distance < shortestDistance then
                            closestPlayer = player
                            shortestDistance = distance
                        end
                    end
                end
            end
        end
    end

    return closestPlayer
end

-- Function to smoothly aim at the enemy's head
local function smoothAimAtHead(player)
    if not player or not player.Character then return end
    local camera = workspace.CurrentCamera
    local head = player.Character:FindFirstChild("Head")

    if head then
        local targetPosition = head.Position
        local currentPosition = camera.CFrame.Position
        local direction = (targetPosition - currentPosition).unit
        local lookAtCFrame = CFrame.new(currentPosition, targetPosition)

        -- Smoothly interpolate the camera's CFrame towards the target
        camera.CFrame = camera.CFrame:Lerp(lookAtCFrame, 0.15)  -- Adjust 0.15 for the smoothing factor
    end
end

-- Function to simulate shooting (with Silent Aim modification)
local function autoFire()
    -- Simulate mouse button down (fire)
    local mouse = game.Players.LocalPlayer:GetMouse()
    local mouseClickEvent = game:GetService("ReplicatedStorage").RemoteEvents.MouseClick -- Replace with correct event
    if mouseClickEvent then
        if _G.SilentAim then
            -- Apply silent aim by slightly adjusting the shooting direction
            local closestEnemy = getClosestEnemyInPlace()
            if closestEnemy and closestEnemy.Character then
                -- Slightly adjust the shot's direction to guarantee a hit on the enemy
                local targetPosition = closestEnemy.Character.Head.Position
                local shotPosition = targetPosition + Vector3.new(math.random(-0.5, 0.5), math.random(-0.5, 0.5), math.random(-0.5, 0.5))
                mouseClickEvent:FireServer(shotPosition) -- Trigger the shot
            end
        else
            mouseClickEvent:FireServer(mouse.Hit.Position) -- Triggering the shot without modification
        end
    end
end

-- Aimbot targeting logic to only aim at the closest player within range (60 studs) and automatically fire
game:GetService("RunService").RenderStepped:Connect(function()
    if _G.AimbotEnabled then
        local closestEnemy = getClosestEnemyInPlace()

        if closestEnemy and closestEnemy.Character then
            smoothAimAtHead(closestEnemy)

            -- Automatically fire when an enemy is locked on
            autoFire()
        end
    end
end)

-- Add general Utility Scripts
local utilityTab = Window:MakeTab({
    Name = "Utility 🛠️",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Utility scripts (e.g., fly, noclip, custom speed)
utilityTab:AddButton({
    Name = "🦅 FLY SCRIPT",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/SomeUser/RobloxFlyScript/main/fly"))()
    end
})

utilityTab:AddButton({
    Name = "🚪 NO CLIP",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/SomeUser/NoClipScript/main/no-clip"))()
    end
})

utilityTab:AddTextbox({
    Name = "⚡ Custom Speed",
    Default = "50",
    TextDisappear = false,
    Callback = function(speed)
        local numberSpeed = tonumber(speed)
        if numberSpeed then
            game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = numberSpeed
        end
    end
})

-- God Mode Toggle
utilityTab:AddToggle({
    Name = "👑 God Mode",
    Default = false,
    Callback = function(State)
        local char = game.Players.LocalPlayer.Character
        if char and char:FindFirstChild("Humanoid") then
            local humanoid = char:FindFirstChild("Humanoid")
            
            if State then
                -- Set MaxHealth to a very high value and set Health to MaxHealth
                humanoid.MaxHealth = math.huge
                humanoid.Health = humanoid.MaxHealth
                
                -- Prevent health from decreasing by resetting it to MaxHealth on damage
                humanoid.HealthChanged:Connect(function()
                    if humanoid.Health < humanoid.MaxHealth then
                        humanoid.Health = humanoid.MaxHealth
                    end
                end)
            else
                -- Reset health to default values
                humanoid.MaxHealth = 100
                humanoid.Health = humanoid.MaxHealth
            end
        end
    end
})

-- Infinite Jump Toggle
local infiniteJumpEnabled = false
local UserInputService = game:GetService("UserInputService")

-- Listen for jump requests
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    -- Check if the jump key was pressed
    if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == Enum.KeyCode.Space then
        if infiniteJumpEnabled then
            -- If Infinite Jump is enabled, simulate jump
            local char = game.Players.LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                local humanoid = char:FindFirstChild("Humanoid")
                humanoid:ChangeState(Enum.HumanoidStateType.Physics)
                humanoid:Move(Vector3.new(0, 50, 0))  -- Apply upward force
            end
        end
    end
end)

-- Toggle Infinite Jump
utilityTab:AddToggle({
    Name = "💨 Infinite Jump",
    Default = false,
    Callback = function(state)
        infiniteJumpEnabled = state
    end
})

-- Farming Tab
local farmingTab = Window:MakeTab({
    Name = "Farming 🌱",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

farmingTab:AddButton({
    Name = "🌻 GROW A GARDEN SCRIPT",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/gumanba/Scripts/main/GrowaGarden"))()
    end
})

farmingTab:AddButton({
    Name = "🌾 AUTO FARM",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/SomeUser/AutoFarmScript/main/autofarm"))()
    end
})

-- Teleportation Tab
local teleportTab = Window:MakeTab({
    Name = "Teleportation 📍",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

teleportTab:AddButton({
    Name = "📍 TELEPORT TO RANDOM LOCATION",
    Callback = function()
        local randomX = math.random(-100, 100)
        local randomY = math.random(10, 50)
        local randomZ = math.random(-100, 100)
        game.Players.LocalPlayer.Character:SetPrimaryPartCFrame(CFrame.new(randomX, randomY, randomZ))
    end
})

-- Admin Tab
local adminTab = Window:MakeTab({
    Name = "Admin 💼",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

adminTab:AddButton({
    Name = "🌐 UNIVERSAL SCRIPT",
    Callback = function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-nameless-admin-15646"))()
    end
})

-- Initialize GUI
OrionLib:Init()
